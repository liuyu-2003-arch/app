// js/i18n.js
const translations = {
    en: {
        "menu_edit_bookmark": "Edit Bookmark",
        "menu_edit_theme": "Edit Theme",
        "menu_pref": "Account Preferences",
        "menu_lang": "Language",
        "menu_logout": "Log out",
        "menu_feedback": "Feedback",
        "theme_default": "Default (Wave)",
        "theme_aurora": "Aurora",
        "theme_flow": "Flow",
        "theme_lines_d": "Diag. Lines",
        "btn_add_bookmark": "âž• Add Bookmark",
        "btn_edit_page": "ðŸ“ Edit Page",
        "btn_import": "ðŸ“¥ Import",
        "btn_export": "ðŸ“¤ Export",
        "btn_done": "Done",
        "btn_cancel": "Cancel",
        "btn_confirm": "Confirm",
        "btn_add_page": "âž• Add New Page",
        "btn_login": "Login",
        "btn_register": "Register",
        "btn_save": "Save Changes",
        "btn_choose_img": "Choose Image",
        "label_url": "URL",
        "label_title": "Title",
        "label_logo": "Logo URL",
        "label_page": "Page",
        "label_email": "Email",
        "label_password": "Password",
        "label_display_name": "Display Name",
        "label_phone": "Phone",
        "ph_url": "e.g. bilibili.com",
        "ph_title": "Title",
        "ph_icon": "Icon URL (Optional)",
        "ph_email": "Email Address",
        "ph_password": "Password (min 6 chars)",
        "modal_edit_title": "Edit/Add Bookmark",
        "modal_page_title": "Edit Pages",
        "modal_auth_title": "Login / Register",
        "modal_auth_hint": "Choose an avatar (for registration)",
        "modal_pref_title": "Account Preferences",
        "preview_title": "Preview",
        "style_full": "Full",
        "style_fit": "Fit",
        "style_white": "White",
        "divider_social": "Or use third-party",
        "auth_guest": "Guest",
        "tab_emoji": "Icons",
        "tab_upload": "Upload",
        "msg_dev": "Feature in development...",
        "msg_login_success": "Login successful",
        "msg_logout": "Logged out",
        "msg_sdk_error": "SDK Error/Not Initialized",
        "msg_third_party_success": "Third-party login successful!",
        "msg_input_req": "Please enter information",
        "msg_email_pass_req": "Please enter email and password",
        "msg_reg_success": "Registration successful, please check email",
        "msg_update_success": "Update successful",
        "msg_select_avatar": "Please select an avatar",
        "msg_title_url_req": "Title and URL are required",
        "msg_page_not_empty": "Page is not empty",
        "msg_import_success": "Import successful",
        "msg_import_fail": "Import failed, format error",
        "msg_logged_in": "Logged in as",
        "msg_select_new_avatar": "Tap to change avatar",
        "msg_save_success": "Preferences saved successfully",
        "msg_saving": "Saving...",
        "msg_saved": "Cloud Synced",
        "msg_save_fail": "Sync Failed",
        "msg_upload_hint": "Max size: 2MB (Auto-compressed)",
        "msg_img_too_large": "Image too large. Please use built-in icons.",
        "msg_sync_success_toast": "Cloud Sync Successful",
        "msg_mobile_edit": "Please edit bookmarks on Desktop"
    },
    zh: {
        "menu_edit_bookmark": "ç¼–è¾‘ä¹¦ç­¾",
        "menu_edit_theme": "ç¼–è¾‘ä¸»é¢˜",
        "menu_pref": "è´¦æˆ·è®¾ç½®",
        "menu_lang": "è¯­è¨€ / Language",
        "menu_logout": "é€€å‡ºç™»å½•",
        "menu_feedback": "é—®é¢˜åé¦ˆ",
        "theme_default": "é»˜è®¤ (æ³¢æµª)",
        "theme_aurora": "æžå…‰",
        "theme_flow": "æµå…‰",
        "theme_lines_d": "å¯¹è§’çº¿æ¡",
        "btn_add_bookmark": "âž• æ·»åŠ ä¹¦ç­¾",
        "btn_edit_page": "ðŸ“ ç¼–è¾‘é¡µé¢",
        "btn_import": "ðŸ“¥ å¯¼å…¥é…ç½®",
        "btn_export": "ðŸ“¤ å¯¼å‡ºé…ç½®",
        "btn_done": "å®Œæˆ",
        "btn_cancel": "å–æ¶ˆ",
        "btn_confirm": "ç¡®å®š",
        "btn_add_page": "âž• æ·»åŠ æ–°é¡µé¢",
        "btn_login": "ç™»å½•",
        "btn_register": "æ³¨å†Œ",
        "btn_save": "ä¿å­˜æ›´æ”¹",
        "btn_choose_img": "é€‰æ‹©å›¾ç‰‡",
        "label_url": "ç½‘é¡µç½‘å€",
        "label_title": "ç½‘é¡µæ ‡é¢˜",
        "label_logo": "å›¾æ ‡åœ°å€",
        "label_page": "æ‰€åœ¨é¡µé¢",
        "label_email": "é‚®ç®±",
        "label_password": "å¯†ç ",
        "label_display_name": "æ˜¾ç¤ºåç§°",
        "label_phone": "æ‰‹æœºå·",
        "ph_url": "ä¾‹å¦‚ bilibili.com",
        "ph_title": "æ ‡é¢˜",
        "ph_icon": "å›¾æ ‡é“¾æŽ¥ (é€‰å¡«)",
        "ph_email": "é‚®ç®±åœ°å€",
        "ph_password": "å¯†ç  (è‡³å°‘6ä½)",
        "modal_edit_title": "ç¼–è¾‘/æ·»åŠ ä¹¦ç­¾",
        "modal_page_title": "ç¼–è¾‘é¡µé¢",
        "modal_auth_title": "ç™»å½• / æ³¨å†Œ",
        "modal_auth_hint": "é€‰æ‹©ä¸€ä¸ªå¤´åƒ (ç”¨äºŽæ³¨å†Œ)",
        "modal_pref_title": "è´¦æˆ·è®¾ç½®",
        "preview_title": "æ ‡é¢˜é¢„è§ˆ",
        "style_full": "é“ºæ»¡",
        "style_fit": "é€‚ä¸­",
        "style_white": "ç•™ç™½",
        "divider_social": "æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹è´¦å·",
        "auth_guest": "æ¸¸å®¢",
        "tab_emoji": "å›¾æ ‡åº“",
        "tab_upload": "ä¸Šä¼ å›¾ç‰‡",
        "msg_dev": "åŠŸèƒ½å¼€å‘ä¸­...",
        "msg_login_success": "ç™»å½•æˆåŠŸ",
        "msg_logout": "å·²é€€å‡ºç™»å½•",
        "msg_sdk_error": "SDK æœªåˆå§‹åŒ–",
        "msg_third_party_success": "ç¬¬ä¸‰æ–¹ç™»å½•æˆåŠŸï¼",
        "msg_input_req": "è¯·è¾“å…¥ä¿¡æ¯",
        "msg_email_pass_req": "è¯·è¾“å…¥é‚®ç®±å¯†ç ",
        "msg_reg_success": "æ³¨å†ŒæˆåŠŸï¼Œè¯·æŸ¥æ”¶é‚®ä»¶",
        "msg_update_success": "æ›´æ–°æˆåŠŸ",
        "msg_select_avatar": "è¯·å…ˆé€‰æ‹©å¤´åƒ",
        "msg_title_url_req": "æ ‡é¢˜å’Œç½‘å€æ˜¯å¿…å¡«çš„",
        "msg_page_not_empty": "é¡µé¢ä¸ä¸ºç©º",
        "msg_import_success": "å¯¼å…¥æˆåŠŸ",
        "msg_import_fail": "å¯¼å…¥å¤±è´¥ï¼Œæ ¼å¼é”™è¯¯",
        "msg_logged_in": "å·²ç™»å½•",
        "msg_select_new_avatar": "ç‚¹å‡»æ›´æ¢å¤´åƒ",
        "msg_save_success": "è®¾ç½®ä¿å­˜æˆåŠŸ",
        "msg_saving": "æ­£åœ¨åŒæ­¥...",
        "msg_saved": "äº‘ç«¯å·²åŒæ­¥",
        "msg_save_fail": "åŒæ­¥å¤±è´¥",
        "msg_upload_hint": "æœ€å¤§ 2MB (è‡ªåŠ¨åŽ‹ç¼©)",
        "msg_img_too_large": "å›¾ç‰‡æ•°æ®è¿‡å¤§æ— æ³•ä¿å­˜ï¼Œè¯·ä½¿ç”¨å†…ç½®å›¾æ ‡",
        "msg_sync_success_toast": "äº‘ç«¯æ•°æ®åŒæ­¥æˆåŠŸ",
        "msg_mobile_edit": "ä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼Œè¯·åœ¨ç”µè„‘ç«¯ç¼–è¾‘ä¹¦ç­¾"
    }
};

export const i18n = {
    currentLang: localStorage.getItem('appLang') || 'en',

    t(key) {
        return translations[this.currentLang][key] || key;
    },

    setLang(lang) {
        this.currentLang = lang;
        localStorage.setItem('appLang', lang);
        this.updateTexts();
    },

    updateTexts() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (key) el.textContent = this.t(key);
        });
        const ids = {
            'input-url': 'ph_url', 'input-title': 'ph_title', 'input-icon': 'ph_icon',
            'auth-email': 'ph_email', 'auth-password': 'ph_password',
            'pref-name': 'label_display_name', 'pref-phone': 'label_phone'
        };
        for (const [id, key] of Object.entries(ids)) {
            const el = document.getElementById(id);
            if (el) el.placeholder = this.t(key);
        }
    }
};